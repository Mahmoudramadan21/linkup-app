/*
 * =============================================================================
 *   Profile Header & Highlights Section
 * =============================================================================
 *
 * Complete styling for:

 *   • Profile Header (cover, avatar, stats, actions, highlights ring)
 *   • Profile Tabs, Bio, and Content Layout
 *   • Highlights Viewer Modal (full-screen story-like experience)
 *   • Create/Edit Highlight Modal*
 *   • 404 / Not Found state
 *
 * Features:
 *   • Responsive profile header (mobile → desktop)
 *   • Highlights horizontal scroll with snap
 *   • Perfect dark mode + high contrast + WCAG 2.1 AA
 *   • Zero layout shift, GPU-optimized
 *   • Full-screen highlights viewer with progress bar & swipe hints
 *   • Smooth modal animations with fadeIn/fadeOut
 *   • Respects prefers-reduced-motion
 *   • Avatar ring for new highlights (unviewed state)
 *   • 100% design token based – no hardcoded values
 */

@tailwind components;
@tailwind utilities;

/* ==========================================================================
   Accessibility – Respect Reduced Motion
   ========================================================================== */
@media (prefers-reduced-motion: reduce) {
  .highlights__viewer_modal_open,
  .highlights__viewer_modal_hide,
  .highlights__viewer_progress_fill,
  .highlights__viewer_nav_hint,
  .highlights__viewer_like_animate,
  .highlights__modal {
    animation: none !important;
  }
}

/* ==========================================================================
   Profile Header – Cover, Avatar, Stats, Actions, Highlights Ring
   ========================================================================== */
.profile-header__container       { @apply card sm-down:p-0 sm-down:pb-4 p-4; }
.profile-header__header          { @apply bg-[var(--card-bg)] relative; }
.profile-header__cover           { @apply relative w-full h-48 sm:h-64 md:h-80; }
.profile-header__cover-image     { @apply w-full h-full object-cover md:rounded-lg; }
.profile-header__cover-placeholder { @apply w-full h-full; }
.profile-header__edit-btn        { @apply absolute top-md right-md btn-rounded--purple disabled:btn-rounded--disabled; }

.profile-header__info {
  @apply absolute lg:-bottom-20 lg:left-[90px]
         -bottom-16 left-1/2 -translate-x-1/2;
}
.profile-header__profile-pic {
  @apply relative;
  width: 10rem !important;
  height: 10rem !important;
}
@media (max-width: 768px) {
  .profile-header__profile-pic {
    width: 8rem !important;
    height: 8rem !important;
  }
}
.profile-header__profile-pic                { @apply border-[rgba(var(--neutral-gray-rgb),0.4)]; }
.profile-header__profile-pic[data-unviewed="true"]  { @apply border-none; }
.profile-header__profile-pic[data-unviewed="true"]::before { @apply p-1; }
.profile-header__profile-pic[data-unviewed="false"] { @apply border-4 border-[var(--border-color)]; }

.profile-header__profile-image   { @apply avatar--inner box-border; width: 100% !important; height: 100% !important; border: none !important; }
.profile-header__profile-placeholder { @apply w-full h-full rounded-full border-4 border-[var(--card-bg)] shadow-lg; }

.profile-header__content {
  @apply px-md py-lg mt-14 flex flex-col justify-center items-center lg:flex-row lg:justify-between text-center lg:text-left gap-md md:gap-lg;
}
.profile-header__details {
  @apply mt-lg md:my-auto w-fit;
}
.profile-header__name            { @apply text-primary-bold capitalize max-w-[240px] mb-sm; }
.profile-header__username        { @apply text-secondary mb-xs; }
.profile-header__followed-by     { @apply text-secondary; }
.profile-header__followed-by-link { @apply text-[var(--linkup-purple)] hover:underline focus-ring; }

/* Stats */
.profile-header__stats {
  @apply w-full max-w-[600px] mx-auto flex flex-wrap justify-around 
         py-lg bg-[var(--card-bg)] rounded-full shadow-sm;
}
.profile-header__stat__item {
  @apply text-center flex flex-col flex-1 min-w-[100px] sm-down:min-w-[80px] px-3;
}
.profile-header__stat__item:not(:last-child) { @apply border-r border-[var(--border-color)]; }
.profile-header__stat_value  { @apply text-lg font-semibold text-[var(--linkup-purple)] cursor-pointer hover:underline focus-ring bg-transparent border-none; }
.profile-header__stat_label  { @apply text-secondary; }

/* Actions */
.profile-header__actions          { @apply flex justify-center items-center gap-sm md:w-[200px]; }
.profile-header__message-btn      { @apply btn-rounded text-[var(--text-primary)] shadow-md focus-ring; }
.profile-header__message-icon     { @apply w-5 h-5; }

/* Highlights Ring on Profile */
.profile-header__highlights {
  @apply flex gap-md mx-md py-md mt-sm overflow-x-auto scrollbar-hidden 
         snap-x snap-mandatory scroll-smooth;
}
.profile-header__highlight-item        { @apply flex flex-col items-center gap-sm snap-center; }
.profile-header__highlight-image-wrapper { @apply avatar--ring; }
.profile-header__highlight-image       { @apply w-full h-full rounded-full object-cover box-content; }
.profile-header__highlight-title       { @apply text-secondary text-center truncate w-full; }

/* Tabs */
.profile-header__tabs     { @apply flex justify-center items-center gap-lg mt-md pt-sm border-t border-[var(--border-color)]; }
.profile-header__tab      { @apply flex flex-col items-center text-secondary cursor-pointer py-sm transition-colors duration-fast hover:text-[var(--linkup-purple)] focus-ring relative; }
.profile-header__tab--active { @apply text-[var(--linkup-purple)]; }
.profile-header__tab--active::after { content: ""; @apply absolute left-1/2 -translate-x-1/2 -bottom-4 w-[200%] h-[6px] bg-[var(--linkup-purple)] rounded-t-lg; }
.profile-header__tab-icon { @apply w-5 h-5; }
.profile-header__tab-label { @apply text-secondary mt-xs tracking-wide; }

/* Bio Card */
.profile-content__bio_card     { @apply card bg-[var(--section-bg)]; }
.profile_bio__header           { @apply flex justify-between items-center mb-md; }
.profile_bio__title            { @apply text-primary-bold; }
.profile_bio__edit_link        { @apply text-secondary hover:underline focus-ring transition-all duration-fast; }
.profile_bio__description      { @apply text-base text-[var(--text-primary)] leading-relaxed whitespace-pre-wrap pb-4 border-b border-[var(--border-color)]; }
.profile_bio__details          { @apply list-none p-0 pt-5 m-0; }
.profile_bio__detail_item      { @apply flex items-center gap-3 mb-3; }
.profile_bio__detail_icon      { @apply text-[var(--text-secondary)] w-6 h-6 flex-shrink-0; }
.profile_bio__detail_text      { @apply text-secondary; }

/* Content Layout */
.profile_content         { @apply flex flex-col md:flex-row gap-lg mt-lg sm-down:flex-col; }
.profile_content__sidebar { @apply w-full md:w-1/3 md:min-w-56 lg:w-[30%] sm-down:w-full; }
.profile_content__feed    { @apply w-full md:w-2/3 lg:w-3/4 sm-down:w-full; }

/* States */
.profile-header__error    { @apply text-center py-lg text-[var(--error)] dark:text-[var(--error)]; }
.profile-header__loading  { @apply text-center py-lg loading--lg; }
.profile-header__not-found { @apply text-center py-lg bg-[var(--warning)] dark:bg-[rgba(var(--warning-rgb),0.2)]; }
.profile-header__not-found-text { @apply text-base text-[var(--warning)] font-medium; }


/* ==========================================================================
   Highlights Viewer Modal (Full-screen)
   ========================================================================== */
.highlights__viewer_modal {
  @apply modal-overlay z-50 flex items-center justify-center;
  display: none;
}
.highlights__viewer_modal_open  { @apply block animate-fadeInModal; }
.highlights__viewer_modal_hide  { @apply block animate-fadeOutModal; }

.highlights__viewer_overlay    { @apply modal-overlay; }
.highlights__viewer_container   { @apply modal--lg relative; }
.highlights__viewer_content     { @apply relative flex flex-col h-full; }

.highlights__viewer_close {
  @apply absolute top-md right-md text-[var(--text-primary)] 
         hover:text-[var(--linkup-purple)] focus-ring rounded-full p-sm 
         transition-all duration-fast z-10;
}

.highlights__viewer_progress {
  @apply absolute top-0 left-0 w-full h-1 
         bg-[rgba(var(--border-color-rgb),0.3)] 
         dark:bg-[rgba(var(--border-color-rgb),0.4)];
}
.highlights__viewer_progress_fill {
  @apply h-full bg-[var(--linkup-purple)] transition duration-progress 
         will-transform animate-progress;
}

.highlights__viewer_title {
  @apply absolute top-lg left-lg text-primary-bold z-10 drop-shadow-lg;
}

.highlights__viewer_media_wrapper { @apply relative flex-1 overflow-hidden bg-[var(--card-bg)]; }
.highlights__viewer_media         { @apply w-full h-full object-cover; }
.highlights__viewer_loading       { @apply absolute inset-0 flex items-center justify-center loading--lg; }

/* Navigation (Prev/Next) */
.highlights__viewer_nav {
  @apply absolute inset-y-0 left-0 right-0 flex justify-between pointer-events-none;
}
.highlights__viewer_nav_prev,
.highlights__viewer_nav_next {
  @apply pointer-events-auto btn-rounded 
         bg-[rgba(var(--app-bg-rgb),0.5)] text-[var(--text-primary)] 
         hover:bg-[rgba(var(--app-bg-rgb),0.7)] focus-ring;
}
.highlights__viewer_nav_prev  { @apply left-md; }
.highlights__viewer_nav_next  { @apply right-md; }
.highlights__viewer_nav_hint  { @apply text-lg will-transform animate-swipeHint; }
.highlights__viewer_nav_prev:disabled,
.highlights__viewer_nav_next:disabled { @apply btn-rounded--disabled; }

/* Bottom Actions */
.highlights__viewer_actions          { @apply absolute bottom-md left-md right-md flex items-center gap-sm; }
.highlights__viewer_latest_viewers   { @apply flex items-center gap-xs text-secondary; }
.highlights__viewer_avatars_stack    { @apply flex -space-x-2; }
.highlights__viewer_avatar_stack     { @apply avatar--md; }
.highlights__viewer_count            { @apply font-medium text-secondary; }
.highlights__viewer_action           { @apply text-[var(--text-primary)] hover:text-[var(--linkup-purple)] focus-ring-teal transition-all duration-fast; }
.highlights__viewer_like_animate     { @apply animate-heartPulse; }
.highlights__viewer_menu_button      { @apply text-[var(--text-primary)] hover:text-[var(--linkup-purple)] focus-ring transition-all duration-fast; }

.highlights__viewer_menu {
  @apply absolute bottom-lg right-md card p-2 py-xs z-10 min-w-[150px];
}
.highlights__viewer_menu_item {
  @apply flex items-center gap-xs px-sm py-sm text-secondary 
         hover:bg-[var(--card-bg)] focus-ring transition-all duration-fast rounded-md;
}

/* ==========================================================================
   Create / Edit Highlight Modal
   ========================================================================== */
.highlights__modal-overlay { @apply modal-overlay z-50 flex items-center justify-center transition-opacity duration-medium; }
.highlights__modal         { @apply card modal animate-fadeInModal; }

.highlights__modal__header { @apply flex items-center justify-between mb-md sticky top-0 py-sm; }
.highlights__modal__title  { @apply text-primary-bold; }
.highlights__modal__button { @apply text-secondary hover:text-[var(--linkup-purple)] focus-ring rounded-full p-xs transition-all duration-fast; }

.highlights__modal__main   { @apply relative; }
.highlights__step          { @apply p-xs; }
.highlights__label         { @apply block mb-xs font-semibold text-secondary; }
.highlights__input         { @apply w-full p-sm rounded-lg border border-[var(--border-color)] bg-[var(--section-bg)] text-[var(--text-primary)] focus-ring transition-shadow duration-fast; }

.highlights__button--next,
.highlights__button--create { @apply btn-rounded--purple; }
.highlights__button         { @apply btn-rounded mt-2; }
.highlights__button:disabled { @apply btn-rounded--disabled; }

.highlights__stories_grid   { @apply grid grid-cols-2 sm:grid-cols-3 gap-sm overflow-y-auto max-h-[400px] scrollbar-thin-purple; }
.highlights__story          { @apply relative cursor-pointer transition duration-medium hover:brightness-75 focus-ring; }
.highlights__story--selected { @apply brightness-75; }
.highlights__story__date    { @apply absolute top-xs left-xs text-secondary bg-[rgba(var(--app-bg-rgb),0.7)] px-xs py-1 rounded-md z-10; }
.highlights__story__image   { @apply rounded-lg object-cover w-full h-[200px]; }
.highlights__story__check   { @apply absolute bottom-xs right-xs text-[var(--linkup-purple)] bg-[var(--card-bg)] rounded-full p-1 shadow-md; }

.highlights__cover_grid     { @apply grid grid-cols-3 gap-sm; }
.highlights__cover          { @apply relative cursor-pointer; }
.highlights__cover__image   { @apply rounded-lg object-cover w-full h-[200px]; }
.highlights__cover_label    { @apply flex items-center gap-xs mt-sm text-secondary hover:text-[var(--linkup-purple)] transition-colors duration-fast; }
.highlights__cover_preview  { @apply mt-sm rounded-lg object-cover w-full h-[200px]; }

.highlights__loading        { @apply text-center text-secondary mt-sm; }
.highlights__skeleton       { @apply grid grid-cols-3 gap-sm; }

.highlights__tabs           { @apply flex border-b border-[var(--border-color)]; }
.highlights__tab            { @apply flex-1 py-sm px-md text-center text-secondary hover:text-[var(--linkup-purple)] focus-ring transition-colors duration-fast; }
.highlights__tab--active    { @apply text-[var(--linkup-purple)] border-b-2 border-[var(--linkup-purple)]; }
.highlights__tabpanel       { @apply w-full py-md; }
.highlights__char-count     { @apply text-secondary mt-xs text-right; }

/* Profile Not Found Page */
.profile-not-found__container { @apply flex flex-col items-center justify-center min-h-[50vh] bg-[var(--section-bg)] rounded-lg p-md sm:p-lg md:p-xl shadow-md text-center; }
.profile-not-found__icon      { @apply text-[var(--linkup-purple)] mb-md; }
.profile-not-found__title     { @apply text-xl lg:text-3xl font-bold text-[var(--text-primary)] mb-sm; }
.profile-not-found__message   { @apply text-[var(--text-secondary)] mb-lg max-w-md sm:max-w-lg md:max-w-xl; }
.profile-not-found__link      { @apply btn-rounded--purple focus-ring flex justify-center items-center gap-2 transition-all duration-fast; }